{% extends "base.html" %}

{% block content %}
  <h2>Add Story</h2>
  <form method="post">
    {% csrf_token %}
    <!-- Title -->
    <label for="title">Title:</label>
    <input type="text"
           name="title"
           value="{{ story.title|default:'' }}"
           required />
    <!-- Published Date -->
    <label for="published_date">Published Date:</label>
    <input type="date"
           name="published_date"
           value="{{ story.published_date|date:'Y-m-d' }}"
           required />
    <!-- Body Text -->
    <label for="body_text">Body Text:</label>
    <textarea name="body_text" required>{{ story.body_text|default:'' }}</textarea>
    <!-- Article URL -->
    <label for="article_url">Article URL:</label>
    <input type="url"
           name="article_url"
           value="{{ story.article_url|default:'' }}"
           required />
    <!-- Tagged Companies -->
    <label for="tagged_companies">Tagged Companies:</label>
    <select name="tagged_companies" id="tagged_companies" multiple>
      {% for company in companies %}
        <option value="{{ company.id }}"
                {% if company.id in selected_tagged_companies %}selected{% endif %}>
          {{ company.company_name }}
        </option>
      {% endfor %}
    </select>
    <button type="submit">
      {% if story %}
        Update
      {% else %}
        Add
      {% endif %}
      Story
    </button>
  </form>
{% endblock %}
