{% extends "base.html" %}

{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/story/list_stories.css' %}">
{% endblock %}

{% block content %}
  <h2 class="page-title">Stories List</h2>

  {% if stories %}
    <div class="stories-container">
      {% for story in stories %}
        <div class="story-card">
          <h3 class="story-title">
            <a href="{{ story.article_url }}" target="_blank">{{ story.title }}</a>
          </h3>
          <p class="story-date"><strong>Published Date:</strong> {{ story.published_date }}</p>
          <p class="story-body">{{ story.body_text|truncatewords:30 }}</p>
          <p class="story-companies">
            <strong>Tagged Companies:</strong>
            {% for company in story.tagged_companies.all %}
              {{ company.company_name }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
          </p>

          <!-- Action Buttons -->
          <div class="story-actions">
            <a href="{% url 'story:edit' story.id %}" class="btn edit-btn">Edit</a>
            <a href="{% url 'story:delete' story.id %}" class="btn delete-btn" onclick="return confirm('Are you sure you want to delete this story?');">Delete</a>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="no-stories">No stories available.</p>
  {% endif %}
{% endblock %}
